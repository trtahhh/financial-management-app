<main class="container py-4 budget-container"> <!-- Smart Budget Section will be added by JavaScript --> <!-- Ultra AI Insights Section --> <div id="ultra-ai-section" class="card mb-4" style="display: none;"> <div class="card-header bg-gradient-primary text-white"> <h5> Ultra AI Budget Insights <span class="badge bg-success">9 ML Libraries</span></h5> <small>Powered by XGBoost, LightGBM, Prophet, SHAP, VADER, TextBlob & more</small> </div> <div class="card-body"> <div class="row mb-3"> <div class="col-md-4"> <select id="ultra-month" class="form-select"> <!-- Will be populated by JS --> </select> </div> <div class="col-md-4"> <select id="ultra-year" class="form-select"> <!-- Will be populated by JS --> </select> </div> <div class="col-md-4"> <button class="btn btn-primary w-100" onclick="getUltraInsights()"> üîÆ Get Ultra AI Insights </button> </div> </div> <div id="ultra-insights-result"></div> <div class="row mt-4"> <div class="col-md-6"> <h6> Category Forecast</h6> <select id="forecast-category" class="form-select mb-2"> <option value="">Select category to forecast</option> </select> <button class="btn btn-info w-100" onclick="getCategoryForecast()"> Forecast with Prophet </button> <div id="forecast-result" class="mt-3"></div> </div> <div class="col-md-6"> <h6> Spending Sentiment Analysis</h6> <button class="btn btn-warning w-100 mt-4" onclick="analyzeSentiment()"> üí≠ Analyze Spending Mood </button> <div id="sentiment-result" class="mt-3"></div> </div> </div> </div> </div> <!-- Smart Budget Recommendations Section --> <div id="smart-budget-section" class="card mb-4"> <div class="card-header bg-gradient-success text-white"> <h5> Smart Budget Recommendations <span class="badge bg-light text-success">AI Powered</span></h5> <small>G·ª£i √Ω ng√¢n s√°ch th√¥ng minh d·ª±a tr√™n l·ªãch s·ª≠ chi ti√™u c·ªßa b·∫°n</small> </div> <div class="card-body"> <div class="row mb-3"> <div class="col-md-6"> <select id="smart-budget-months" class="form-select"> <option value="1">Ph√¢n t√≠ch 1 th√°ng g·∫ßn nh·∫•t</option> <option value="3" selected>Ph√¢n t√≠ch 3 th√°ng g·∫ßn nh·∫•t</option> <option value="6">Ph√¢n t√≠ch 6 th√°ng g·∫ßn nh·∫•t</option> </select> </div> <div class="col-md-6"> <button class="btn btn-success w-100" onclick="getSmartBudget()"> Get Smart Budget Recommendations </button> </div> </div> <div id="smart-budget-result"></div> </div> </div> <div class="card"> <div class="card-header"> <h5> Ng√¢n s√°ch hi·ªán t·∫°i</h5> </div> <div class="card-body"> <div class="table-responsive"> <table id="budget-table" class="table table-striped"> <thead> <tr> <th>Danh m·ª•c</th> <th>S·ªë ti·ªÅn</th> <th>K·ª≥ h·∫°n</th> <th>Thao t√°c</th> </tr> </thead> <tbody></tbody> </table> </div> <button id="budget-add-btn" class="btn btn-success" onclick="showAddBudgetModal()"> + Th√™m ng√¢n s√°ch th·ªß c√¥ng </button> </div> </div> <!-- NEW: AI BUDGET COACH - Interactive Assistant --> <div class="row mb-4"> <div class="col-lg-8"> <div class="card border-0 shadow-lg"> <div class="card-header bg-gradient-dark text-white"> <h5 class="mb-0"> <i class="fas fa-robot"></i> AI Budget Coach <span class="badge bg-warning text-dark">Real-time</span> </h5> <small>Ask anything about your budget and spending habits</small> </div> <div class="card-body" style="height: 400px; overflow-y: auto;" id="budget-chat-container"> <div id="budget-chat-messages" class="mb-3"> <div class="alert alert-info"> <i class="fas fa-lightbulb"></i> Try asking: <ul class="mb-0 mt-2"> <li>"How can I reduce my food budget?"</li> <li>"What's my biggest spending category?"</li> <li>"Give me tips to save more money"</li> <li>"Analyze my spending patterns"</li> </ul> </div> </div> </div> <div class="card-footer"> <div class="input-group"> <input type="text" class="form-control" id="budget-coach-input" placeholder="Ask your AI Budget Coach..." onkeypress="if(event.key==='Enter') sendBudgetCoachMessage()"> <button class="btn btn-primary" onclick="sendBudgetCoachMessage()"> <i class="fas fa-paper-plane"></i> Send </button> </div> </div> </div> </div> <div class="col-lg-4"> <div class="card border-0 shadow-lg h-100"> <div class="card-header bg-gradient-info text-white"> <h6 class="mb-0"><i class="fas fa-chart-line"></i> Prediction Confidence</h6> </div> <div class="card-body text-center" id="prediction-confidence"> <div class="mb-3"> <canvas id="confidenceGauge" width="200" height="200"></canvas> </div> <div id="confidence-details"> <button class="btn btn-info btn-sm w-100" onclick="updateConfidenceScore()"> <i class="fas fa-sync"></i> Update Confidence </button> </div> </div> </div> </div> </div> <!-- NEW: SPENDING HEATMAP --> <div class="row mb-4"> <div class="col-12"> <div class="card border-0 shadow-lg"> <div class="card-header bg-gradient-danger text-white"> <h5 class="mb-0"> <i class="fas fa-fire"></i> Spending Heatmap <span class="badge bg-light text-danger">Hot Zones</span> </h5> <small>Visualize your spending patterns across categories and time</small> </div> <div class="card-body"> <div class="row mb-3"> <div class="col-md-3"> <select id="heatmap-period" class="form-select" onchange="loadSpendingHeatmap()"> <option value="week">This Week</option> <option value="month" selected>This Month</option> <option value="quarter">This Quarter</option> </select> </div> <div class="col-md-9 text-end"> <div class="btn-group" role="group"> <button class="btn btn-sm btn-outline-danger" onclick="setHeatmapView('category')">By Category</button> <button class="btn btn-sm btn-outline-danger active" onclick="setHeatmapView('time')">By Time</button> <button class="btn btn-sm btn-outline-danger" onclick="setHeatmapView('combined')">Combined</button> </div> </div> </div> <div id="spending-heatmap-container" style="height: 300px; position: relative;"> <canvas id="spendingHeatmap"></canvas> </div> <div class="row mt-3"> <div class="col-md-12"> <div class="d-flex justify-content-between align-items-center"> <small class="text-muted"> <i class="fas fa-square text-success"></i> Low Spending <i class="fas fa-square text-warning ms-3"></i> Medium Spending <i class="fas fa-square text-danger ms-3"></i> High Spending </small> <div id="heatmap-stats" class="text-end"> <small class="text-muted">Loading...</small> </div> </div> </div> </div> </div> </div> </div> </div> <!-- NEW: SPENDING PATTERN TIMELINE --> <div class="row mb-4"> <div class="col-12"> <div class="card border-0 shadow-lg"> <div class="card-header bg-gradient-purple text-white"> <h5 class="mb-0"> <i class="fas fa-chart-area"></i> Spending Pattern Timeline <span class="badge bg-warning text-dark">Anomaly Detection</span> </h5> <small>Track your spending trends with AI-detected anomalies</small> </div> <div class="card-body"> <div class="row mb-3"> <div class="col-md-6"> <select id="timeline-category" class="form-select" onchange="loadSpendingTimeline()"> <option value="all">All Categories</option> <!-- Will be populated by JS --> </select> </div> <div class="col-md-6"> <select id="timeline-range" class="form-select" onchange="loadSpendingTimeline()"> <option value="30">Last 30 Days</option> <option value="60">Last 60 Days</option> <option value="90" selected>Last 90 Days</option> <option value="180">Last 6 Months</option> </select> </div> </div> <div id="timeline-container" style="height: 250px; position: relative;"> <canvas id="spendingTimeline"></canvas> </div> <div id="anomaly-list" class="mt-3"> <!-- Anomalies will be shown here --> </div> </div> </div> </div> </div> <!-- NEW: AI INSIGHTS SUMMARY PANEL --> <div class="row mb-4"> <div class="col-lg-4"> <div class="card border-0 shadow-lg bg-gradient-success text-white h-100"> <div class="card-body text-center"> <i class="fas fa-trophy fa-3x mb-3 opacity-75"></i> <h3 id="savings-potential" class="mb-1">0 VNƒê</h3> <p class="mb-0">Potential Monthly Savings</p> <button class="btn btn-light btn-sm mt-3" onclick="showSavingsTips()"> <i class="fas fa-lightbulb"></i> How to Save </button> </div> </div> </div> <div class="col-lg-4"> <div class="card border-0 shadow-lg bg-gradient-warning text-dark h-100"> <div class="card-body text-center"> <i class="fas fa-chart-pie fa-3x mb-3 opacity-75"></i> <h3 id="top-spending-category" class="mb-1">-</h3> <p class="mb-0">Top Spending Category</p> <div id="category-percentage" class="mt-2"> <small>Loading...</small> </div> </div> </div> </div> <div class="col-lg-4"> <div class="card border-0 shadow-lg bg-gradient-info text-white h-100"> <div class="card-body text-center"> <i class="fas fa-calendar-check fa-3x mb-3 opacity-75"></i> <h3 id="budget-health-score" class="mb-1">0%</h3> <p class="mb-0">Budget Health Score</p> <div id="health-status" class="mt-2"> <span class="badge bg-light text-info">Calculating...</span> </div> </div> </div> </div> </div> </main> <!-- Budget Form Modal --> <div id="budget-modal" class="modal" tabindex="-1"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <h5 id="budget-modal-title" class="modal-title">Th√™m ng√¢n s√°ch</h5> <button type="button" class="btn-close" data-bs-dismiss="modal"></button> </div> <div class="modal-body"> <form id="budget-form"> <input type="hidden" name="id"> <div class="mb-3"> <label class="form-label">Danh m·ª•c</label> <select class="form-select" name="category_id" required> <option value="">Ch·ªçn danh m·ª•c</option> </select> </div> <div class="mb-3"> <label class="form-label">S·ªë ti·ªÅn</label> <input type="number" class="form-control" name="amount" required> </div> <div class="mb-3"> <label class="form-label">K·ª≥ h·∫°n (YYYY-MM)</label> <input type="month" class="form-control" name="period" required> </div> </form> </div> <div class="modal-footer"> <button class="btn btn-secondary" data-bs-dismiss="modal">H·ªßy</button> <button class="btn btn-success" type="button" onclick="saveBudget()">L∆∞u</button> </div> </div> </div> </div> <script> function showAddBudgetModal() { const modal = new bootstrap.Modal(document.getElementById('budget-modal')); modal.show(); } </script> <script src="/js/budgets.js"></script> 