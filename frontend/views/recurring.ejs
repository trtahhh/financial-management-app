<main class="container py-4"> <div class="row"> <div class="col-12"> <div class="d-flex justify-content-between align-items-center mb-4"> <div> <h2 class="text-success fw-bold mb-1"> Giao dịch định kỳ</h2> <p class="text-muted mb-0">Tự động hóa các giao dịch lặp lại hàng ngày, tuần, tháng</p> </div> <div class="d-flex gap-2"> <button class="btn btn-outline-success" onclick="executeAllDue()"> <i class="fas fa-play me-1"></i> Thực thi tất cả </button> <button class="btn btn-success" onclick="showAddModal()"> <i class="fas fa-plus me-1"></i> Tạo mới </button> </div> </div> <!-- Stats Cards --> <div class="row g-3 mb-4"> <div class="col-md-3"> <div class="card border-0 shadow-sm"> <div class="card-body"> <div class="d-flex align-items-center"> <div class="rounded-circle bg-success bg-opacity-10 p-3 me-3"> <i class="fas fa-check-circle text-success fs-4"></i> </div> <div> <h6 class="text-muted mb-1 small">Đang hoạt động</h6> <h3 class="mb-0 fw-bold" id="activeCount">0</h3> </div> </div> </div> </div> </div> <div class="col-md-3"> <div class="card border-0 shadow-sm"> <div class="card-body"> <div class="d-flex align-items-center"> <div class="rounded-circle bg-warning bg-opacity-10 p-3 me-3"> <i class="fas fa-pause-circle text-warning fs-4"></i> </div> <div> <h6 class="text-muted mb-1 small">Đã tạm dừng</h6> <h3 class="mb-0 fw-bold" id="inactiveCount">0</h3> </div> </div> </div> </div> </div> <div class="col-md-3"> <div class="card border-0 shadow-sm"> <div class="card-body"> <div class="d-flex align-items-center"> <div class="rounded-circle bg-info bg-opacity-10 p-3 me-3"> <i class="fas fa-clock text-info fs-4"></i> </div> <div> <h6 class="text-muted mb-1 small">Sắp thực thi</h6> <h3 class="mb-0 fw-bold" id="dueCount">0</h3> </div> </div> </div> </div> </div> <div class="col-md-3"> <div class="card border-0 shadow-sm"> <div class="card-body"> <div class="d-flex align-items-center"> <div class="rounded-circle bg-primary bg-opacity-10 p-3 me-3"> <i class="fas fa-calendar-alt text-primary fs-4"></i> </div> <div> <h6 class="text-muted mb-1 small">Tổng số</h6> <h3 class="mb-0 fw-bold" id="totalCount">0</h3> </div> </div> </div> </div> </div> </div> <!-- Filter Tabs --> <ul class="nav nav-pills mb-4" role="tablist"> <li class="nav-item" role="presentation"> <button class="nav-link active" id="all-tab" data-bs-toggle="pill" data-bs-target="#all" type="button" onclick="filterRecurring('all')"> Tất cả </button> </li> <li class="nav-item" role="presentation"> <button class="nav-link" id="active-tab" data-bs-toggle="pill" data-bs-target="#active" type="button" onclick="filterRecurring('active')"> <i class="fas fa-check-circle text-success"></i> Đang hoạt động </button> </li> <li class="nav-item" role="presentation"> <button class="nav-link" id="inactive-tab" data-bs-toggle="pill" data-bs-target="#inactive" type="button" onclick="filterRecurring('inactive')"> <i class="fas fa-pause-circle text-warning"></i> Đã tạm dừng </button> </li> <li class="nav-item" role="presentation"> <button class="nav-link" id="income-tab" data-bs-toggle="pill" data-bs-target="#income" type="button" onclick="filterRecurring('income')"> <i class="fas fa-arrow-up text-success"></i> Thu nhập </button> </li> <li class="nav-item" role="presentation"> <button class="nav-link" id="expense-tab" data-bs-toggle="pill" data-bs-target="#expense" type="button" onclick="filterRecurring('expense')"> <i class="fas fa-arrow-down text-danger"></i> Chi tiêu </button> </li> </ul> <!-- Recurring Transactions List --> <div class="row g-3" id="recurringList"> <!-- Cards will be dynamically generated here --> </div> <!-- Empty State --> <div id="emptyState" class="text-center py-5" style="display: none;"> <i class="fas fa-calendar-times text-muted" style="font-size: 4rem;"></i> <h4 class="text-muted mt-3">Chưa có giao dịch định kỳ nào</h4> <p class="text-muted">Tạo giao dịch định kỳ để tự động hóa thu chi của bạn</p> <button class="btn btn-success mt-2" onclick="showAddModal()"> <i class="fas fa-plus me-1"></i> Tạo giao dịch định kỳ đầu tiên </button> </div> </div> </div> </main> <!-- Add/Edit Modal --> <div class="modal fade" id="recurringModal" tabindex="-1"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <h5 class="modal-title" id="modalTitle">Tạo giao dịch định kỳ</h5> <button type="button" class="btn-close" data-bs-dismiss="modal"></button> </div> <div class="modal-body"> <form id="recurringForm"> <input type="hidden" id="recurringId" /> <div class="mb-3"> <label class="form-label">Tên giao dịch <span class="text-danger">*</span></label> <input type="text" class="form-control" id="description" placeholder="VD: Lương tháng" required /> </div> <div class="row"> <div class="col-md-6 mb-3"> <label class="form-label">Loại <span class="text-danger">*</span></label> <select class="form-select" id="type" required> <option value="income">Thu nhập</option> <option value="expense">Chi tiêu</option> </select> </div> <div class="col-md-6 mb-3"> <label class="form-label">Số tiền <span class="text-danger">*</span></label> <input type="number" class="form-control" id="amount" placeholder="0" min="0" step="1000" required /> </div> </div> <div class="row"> <div class="col-md-6 mb-3"> <label class="form-label">Danh mục <span class="text-danger">*</span></label> <select class="form-select" id="categoryId" required> <!-- Will be populated dynamically --> </select> </div> <div class="col-md-6 mb-3"> <label class="form-label">Ví <span class="text-danger">*</span></label> <select class="form-select" id="walletId" required> <!-- Will be populated dynamically --> </select> </div> </div> <div class="row"> <div class="col-md-6 mb-3"> <label class="form-label">Tần suất <span class="text-danger">*</span></label> <select class="form-select" id="frequency" required> <option value="daily">Hàng ngày</option> <option value="weekly">Hàng tuần</option> <option value="monthly">Hàng tháng</option> <option value="yearly">Hàng năm</option> </select> </div> <div class="col-md-6 mb-3"> <label class="form-label">Ngày thực thi <span class="text-danger">*</span></label> <input type="number" class="form-control" id="dayOfExecution" min="1" max="31" placeholder="1-31" required /> <small class="text-muted">Ngày trong tháng (1-31)</small> </div> </div> <div class="mb-3"> <label class="form-label">Ngày bắt đầu <span class="text-danger">*</span></label> <input type="date" class="form-control" id="startDate" required /> </div> <div class="mb-3"> <label class="form-label">Ngày kết thúc</label> <input type="date" class="form-control" id="endDate" /> <small class="text-muted">Để trống nếu không có ngày kết thúc</small> </div> <div class="form-check mb-3"> <input class="form-check-input" type="checkbox" id="isActive" checked /> <label class="form-check-label" for="isActive"> Kích hoạt ngay </label> </div> </form> </div> <div class="modal-footer"> <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button> <button type="button" class="btn btn-success" onclick="saveRecurring()"> <i class="fas fa-save me-1"></i> Lưu </button> </div> </div> </div> </div> <script src="/js/recurring.js"></script> 